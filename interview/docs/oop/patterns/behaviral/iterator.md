# Ітератор (Iterator)

## Суть патерна

**Ітератор** - це поведінковий патерн, який дозволяє послідовно обходити елементи колекції **без розкриття її внутрішної струкури**. Ітератори інкапсулює логіку обходу, а сама колекція лише надає до нього доступу.

## Проблема

У вас є колекція об'єктів (список, множина, дерево тощо). Ви хочете пройтися по ній послідовно, але **не хочете залежати від її конкретної структури**. Також може бути кілька спосібів ітерування: у прямому порядку, у зворотному, фільтровано тощо.

## Рішення

Винести логіку обходу з колекції в окремий об'єкт - **ітератор**, який знає, як іти по елементах.

## Приклад реалізації

```python
from collections.abc import Iterable, Iterator

# Клас колекції
class WordCollection(Iterable):
    def __init__(self):
        self._items = []

    def add(self, item: str):
        self._items.append(item)

    def __iter__(self):
        return AlphabeticalIterator(self._items)

# Ітератор (а алфавітному порядку)
class AlphabeticalIterator(Iterator):
    def __init__(self, collection: list[str]):
        self._collection = sorted(collection)
        self._index = 0

    def __next__(self):
        if self._index < len(self._collection):
            result = self._collection[self._index]
            self._index += 1
            return result
        raise StopIteration

# Приклад використання
collection = WordCollection()
collection.add("banana")
collection.add("apple")
collectio.add("cherry")

for word in collection:
    print(word)

# Виведе:
# apple
# banana
# cherry
```
## Коли використовувати

 - Коли потрібно **обійти елементи колекції без знання її внутрішньої будови**.
 - Коли треба підтримувати **декілька варіантів обходу** (прямий, зворотній, по групах тощо).
 - Коли хочете зробити API колекції більш дружнім для користувача.

## Переваги

 - Інкапсуляція логіки обходу (колекція не "знає", як її обходять).
 - Підтримка декількох типів ітерації.
 - Дозволяє легко реалізовувати **лениві** (lazy) обходи.

## Недоліки

 - Для нестандартних структур може бути складно реалізовувати.
 - Якщо треба зберігати стан (наприклад, у дереві) - ітератор може стати об'ємним.

## Аналогія з життя

**Пульт для слайдів перезентації**: він просто дозволяє "перегортати" слайди по черзі, не знаючи, як вони зберігаються всередині программ.

## Типові сценарії

 - Ітерація по складних структурах (дерево, граф).
 - Різні способи прегляду одного і того ж набору даних.
 - Коли потрібно надати зручний API для користувача типу `for item in collection`.