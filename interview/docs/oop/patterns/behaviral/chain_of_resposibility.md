# Цепочка обов’язків

## Суть патерну

**Цепочка обов'язків** - це патерн проектування, який дозволяє передавати запит вздовж ланцюжка обробників. Кожен обробник вирішує, чи може він оброби запит, або передає його далі по ланцюгу. Таким чином, відправник запиту не знає, хто саме його обробить.

## Проблема

Уявимо систему обробки повідомлень або логування, де потрібно реагувати на різні рівні повідомлень: `INFO`, `WARNING`, `ERROR`. З часом `if-elif-else` умов стає надто багато,  і код стає складним у підтримці.

## Рішення

Винести кожен тип обробки у свій окремий клас. Ці об'єкти зв'язуться у ланцюжок, через який "протікає" запит. Якщо поточний обробник не може обробити запит, він передає його далі.

## Приклад реалізації на Python

```python
from abc import ABC, abstractmethod


# Абстрактний клас обробника
class Handler(ABC):
    def __init__(self, next_handler=None):
        self.next_handler = next_handler

    @abstractmethod
    def handle(self, request):
        pass

# Конкретні обробники 
class InfoHandler(Handler):
    def handle(self, request):
        if request == "INFO":
            print("Оброблено повідомлення рівня INFO")
        elif self.next_handler:
            self.next_handler.handle(request)

class WarningHandler(Handler):
    def handle(self, request):
        if request == "WARNING":
            print("Оброблено повідомлення рівня WARNING")
        elif self.next_handler:
            self.next_handler.handle(request)

class ErrorHandler(Handler):
    def handle(self, request):
        if request == "ERROR":
            print("Оброблено повідомлення рівня ERROR")
        elif self.next_handler:
            self.next_handler.handle(request)

# Побудова ланцюга
error_handler = ErrorHandler()
warning_handler = WarningHandler(next_handler=error_handler)
info_handler = InfoHandler(next_handler=warning_handler)

# Використання
info_handler.handle("WARNING")  # Оброблено повідомлення рівня WARNING
info_handler.handle("ERROR")    # Оброблено повідомлення рівня ERROR
info_handler.handle("INFO")     # Оброблено повідомлення рівня INFO

```

## Коли використовується
 - Коли є кілька об'єків, які можуть обробити запит, і невідомо наперед, хто саме його обробить.
 - Коли обробники потрібно комбінувати або змінювати динамічно.
 - Коли потрібно зменьшити залежність між відправником і отримувачем запиту.

## Переваги
 - Зменьшення зв'язності між класами.
 - Гнучкість у додаванні/видаленні обробників.
 - Можливість змінювати порядок або склад обробників під час виконання.

## Недоліки
 - Може бути важко відслідковувати, хто саме обробить запит.
 - Якщо жоден обробник не зреагує - запит залишиться необробленим.
 - Неочивидна логіки проходження ланцюга для нових розробників.

## Аналогія з життя

**Техпідтримка**:
Користува телефонує -> оператор першої лінії пробує допомогти -> якщо не вийшло - передає далі -> до технічного спеціаліста -> до розробника тощо.
Кожен рівень це - окремий обробник ланцюгу