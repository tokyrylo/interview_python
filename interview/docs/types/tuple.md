# Tuple 

***Що таке кортеж (tuple)?***

Кортеж у Python - це **незмінюваний (immutable), впорядкований** тип даних, який зберігає послідовність елементів. Елементи кортежу можуть бути будь-якого типу (навіть інші кортежи), яле після створення кортежу його елементи не можна змінювати.

Приклад:

```python 
my_tuple = (1, "hello", 3.14, (1, 2, 3))
```

***Як кортеж працює "під капотом"?***

**1. Внутрішня організація**

Кортеж у python реалізований як **статичний масив посилань на об'єкти**. Це означає:

  - Кортеж зберігає **посилання (references)** на об'єкти, але самі об'єкти не зберігються в середині кортежу.
  - Елементи кортежу можуть бути різних типів, оскільки Python зберігає лише посилання на них.
  - Кортеж є незмінюваним, тому після створення його розмір і вміст не можуть бути змінені.

**2. Використання пам'яті**

  - **Посилання на об'єкти**: Кортеж зберігає вказівники (посилання) на об'єкти в пам'яті. Наприклад, якщо у вас є кортеж `(1, "hello", 3.14)`, то в пам'яті зберігаються посилання на цілі числа, рядки та числа з плаваючою точкою.
  - **Фіксований розмір**: Оскільки кортеж є незмінюваним, його розмір фіксований після створення. Це дозволяє Python оптимізувати використання пам'яті.
  - **Ефективність**: Кортежі зазвичай використовують менше пам'яті, ніж списки, оскільки вони не потребують додаткові пам'яті для динамічного зменення роміру.

***3. Операції з кортежами та їх складність***

Ось основні операції з кортежами та їх часова складність (Big-O):

| Операція | Складність | Опис |
| --------------- | --------------- | --------------- |
| Доступ за індекс (`t[i]`) | О(1) | Швидкий доступ до елементів за індексом. |
| Пошук (`x in t`) | O(n) | Пошук елементу в кортежі потребує перебору всіх елементів. |
| Зріз (`t[a:b]`) | O(k) | Створення нового кортежу з елементів від `a` до `b`. |
| Конкатенація (`t1 + t2`) | O(n+m) | Створення нового кортежу шляхом об'єднання двох кортежів. |
| Ітерація | О(n) | Перебір всіх елементів кортежу. |

***4. Незмінюваність (Immutable)*** 

  - Кортеж є незмінюваним, тому після створення його елементи не можна змінювати, додавати або видаляти.
  - Це робить кортежі безпечними для використання в якості ключів у словниках або елементів множин. 

Приклад:

```python 
my_tuple = (1, 2, 3)
my_tuple[0] = 10 # Помилка 'tuple' object does not support item assigment
```

***5. Переваги кортежів***

  - **Ефективність**: Кортежі зазвичай швидші за списки, оскільки вони не потребують динамічного змінення розміру.
  - **Незмінюваність**: Кортежі є безпечними для використання в якості ключів у словниках або елементів множин.
  - **Меньшу викоритання пам'яті**: Кортежі використовують менше пам'яті, ніж списки.

**6. Недоліки кортежів**

  - **Незмінюваність**: Неможливість змінити елементи після створення може бути обмеженням у деяких сценаріях.
  - **Обмежена функціональність**: Кортежі мають менше методів порівняно зі списками.

***7. Внутрішня реалізація у CPython***

```c 
typedef struct {
  PyObject_VAR_HEAD 
  PyObject *ob_item[1]; // Масив посилань на об'єкти 
} PyTupleObject;
```

  - `ob_item`: Масив посилань на об'єкти.
  - `PyObject_VAR_HEAD`: Заголовок, який містить інформацію про розмір кортежу. 

***8. Приклад роботи з кортежем***

```python 
# Створення кортежу 
my_tuple = (1, "hello", 3.14)

# Доступ за індексом 
print(my_tuple[0]) # 1 

# Зріз 
new_tuple = my_tuple[1:3] # ("hello", 3.14)

# Конкатенація
combined_tuple = my_tuple + (4, 5) # (1, "hello", 3.14, 4, 5)

# Ітерація 
for item in my_tuple:
  print(item)
```

***Висновок***

- Кортеж у Python - це **незмінюванний, впорядкований** тип даних.
- Він зберігає посилання на об'єкти в статичному масиву.
- Основні операції (доступ за індексом, зріз) мають складність О(1).
.
- Кортежі є ефективним та безпечними для використання в якості ключів у словниках аббо елементів множин.- Кортежі є ефективним та безпечними для використання в якості ключів у словниках аббо елементів множин.
